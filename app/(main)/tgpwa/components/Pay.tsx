'use client';
import { AnimatePresence, motion } from 'framer-motion';

import { useAtom } from 'jotai';

import { ChevronRight } from 'lucide-react';
import { useRouter } from 'next/navigation';
import { useEffect, useState } from 'react';

import { useFormatBalance } from '@/hooks/useFormatBalance';
import { useTransfer } from '@/hooks/useTransfer';
import { useWalletBalance } from '@/hooks/useWalletBalance';
import { delay } from '@/lib/utils';
import { openedModalAtom } from '@/state/modal';
import { planAtom } from '@/state/plan';
import { AlertDialog, AlertDialogOverlay, AlertDialogPortal } from '@/ui-components/AlertDialog';
import { Toast } from '@/ui-components/Toast';

export const Pay = () => {
  const [openedModal, setOpenedModal] = useAtom(openedModalAtom);
  const [done, setDone] = useState(false);
  const { switchPlan } = useTransfer(false);
  const router = useRouter();
  const [isInProcess, setIsInProcess] = useState(false);
  const [plan, setPlan] = useAtom(planAtom);
  const { totalBalance } = useWalletBalance();
  const formatBalance = useFormatBalance({ show: true });

  useEffect(() => {
    if (openedModal === 'pay' && !isInProcess) {
      console.log('pay....');
      setIsInProcess(true);
      setTimeout(() => {
        setDone(true);
        Toast.show({
          icon: 'loading',
          duration: 0,
          content: 'loading...',
        });
        delay(1000).then(() => {
          Toast.clear();
          setOpenedModal('ton');
        });
      }, 2000);
    }
  }, [isInProcess, openedModal, plan, router, setOpenedModal, setPlan, switchPlan]);

  useEffect(() => {
    if (openedModal !== 'pay') {
      setDone(false);
      setIsInProcess(false);
    }
  }, [openedModal]);

  return (
    <AnimatePresence>
      {openedModal === 'pay' && (
        <AlertDialog open={true}>
          <AlertDialogPortal>
            <AlertDialogOverlay onClick={() => setOpenedModal(undefined)} />

            <motion.div
              className="absolute bottom-0 z-50 rounded-t-xl shadow-lg w-full bg-[#ebebeb]"
              initial={{ y: '100%' }}
              animate={{ y: 0 }}
              exit={{ y: '100%' }}
              transition={{ type: 'tween', ease: 'easeInOut', duration: 0.3 }}
              onClick={(e) => e.stopPropagation()}
            >
              {!done && (
                <div className="fixed top-24 right-0">
                  <svg width="131" height="105" viewBox="0 0 131 105" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clipPath="url(#clip0_510_2806)">
                      <path
                        d="M121.643 5C121.643 2.23857 123.881 0 126.643 0H131V104.653H126.643C123.881 104.653 121.643 102.415 121.643 99.6535V5Z"
                        fill="white"
                      />
                      <path
                        d="M1.70068 47.9966V34.6094H6.28369C7.60726 34.6094 8.7391 34.8753 9.6792 35.4072C10.6255 35.9329 11.3491 36.6937 11.8501 37.6895C12.3511 38.6852 12.6016 39.8851 12.6016 41.2891V41.3076C12.6016 42.7116 12.3511 43.9146 11.8501 44.9165C11.3491 45.9123 10.6286 46.6761 9.68848 47.208C8.74837 47.7337 7.61344 47.9966 6.28369 47.9966H1.70068ZM3.37061 46.4937H6.17236C7.16813 46.4937 8.01855 46.2896 8.72363 45.8813C9.42871 45.4731 9.9668 44.8825 10.3379 44.1094C10.709 43.3363 10.8945 42.4085 10.8945 41.3262V41.3076C10.8945 40.2191 10.7059 39.2882 10.3286 38.5151C9.95752 37.7358 9.41943 37.1421 8.71436 36.7339C8.00928 36.3195 7.16195 36.1123 6.17236 36.1123H3.37061V46.4937ZM19.3184 48.1729C18.3783 48.1729 17.5649 47.9657 16.8784 47.5513C16.1919 47.1307 15.66 46.5369 15.2827 45.77C14.9116 44.9969 14.7261 44.0815 14.7261 43.0239V43.0054C14.7261 41.9354 14.9116 41.0169 15.2827 40.25C15.66 39.4769 16.1919 38.8831 16.8784 38.4688C17.5649 38.0544 18.3783 37.8472 19.3184 37.8472C20.2646 37.8472 21.0811 38.0544 21.7676 38.4688C22.4541 38.8831 22.9829 39.4769 23.354 40.25C23.7313 41.0169 23.9199 41.9354 23.9199 43.0054V43.0239C23.9199 44.0815 23.7313 44.9969 23.354 45.77C22.9829 46.5369 22.4541 47.1307 21.7676 47.5513C21.0872 47.9657 20.2708 48.1729 19.3184 48.1729ZM19.3276 46.7441C19.9523 46.7441 20.4811 46.5988 20.9141 46.3081C21.3532 46.0112 21.6872 45.5845 21.916 45.0278C22.151 44.4712 22.2686 43.8032 22.2686 43.0239V43.0054C22.2686 42.2137 22.151 41.5426 21.916 40.9922C21.6872 40.4355 21.3532 40.0119 20.9141 39.7212C20.4749 39.4243 19.943 39.2759 19.3184 39.2759C18.6937 39.2759 18.1618 39.4243 17.7227 39.7212C17.2897 40.0119 16.9557 40.4355 16.7207 40.9922C16.4919 41.5426 16.3774 42.2137 16.3774 43.0054V43.0239C16.3774 43.8032 16.4919 44.4712 16.7207 45.0278C16.9557 45.5845 17.2897 46.0112 17.7227 46.3081C18.1618 46.5988 18.6968 46.7441 19.3276 46.7441ZM29.6997 48.1729C28.9513 48.1729 28.3205 48.0306 27.8071 47.7461C27.2938 47.4554 26.9072 47.0348 26.6475 46.4844C26.3939 45.9339 26.2671 45.266 26.2671 44.4805V38.0234H27.8813V44.1001C27.8813 44.9907 28.0576 45.6556 28.4102 46.0947C28.7627 46.5277 29.3348 46.7441 30.1265 46.7441C30.7078 46.7441 31.1965 46.6297 31.5923 46.4009C31.9943 46.172 32.2974 45.8473 32.5015 45.4268C32.7056 45.0062 32.8076 44.5052 32.8076 43.9238V38.0234H34.4219V47.9966H32.8076V46.5122H32.6685C32.4211 47.0379 32.0469 47.4461 31.5459 47.7368C31.0511 48.0275 30.4357 48.1729 29.6997 48.1729ZM42.2983 48.1729C41.6056 48.1729 40.9902 48.0182 40.4521 47.709C39.9141 47.3936 39.4904 46.9575 39.1812 46.4009H39.042V47.9966H37.4277V34.0806H39.042V39.6099H39.1812C39.4595 39.0718 39.877 38.645 40.4336 38.3296C40.9902 38.008 41.6118 37.8472 42.2983 37.8472C43.1457 37.8472 43.8817 38.0605 44.5063 38.4873C45.131 38.9141 45.6165 39.514 45.9629 40.2871C46.3092 41.054 46.4824 41.9601 46.4824 43.0054V43.0239C46.4824 44.0568 46.3092 44.9629 45.9629 45.7422C45.6165 46.5153 45.1279 47.1152 44.4971 47.542C43.8724 47.9626 43.1395 48.1729 42.2983 48.1729ZM41.9272 46.7441C42.5396 46.7441 43.0591 46.5957 43.4858 46.2988C43.9188 45.9958 44.2497 45.5659 44.4785 45.0093C44.7135 44.4526 44.8311 43.7909 44.8311 43.0239V43.0054C44.8311 42.2261 44.7135 41.5612 44.4785 41.0107C44.2497 40.4541 43.9188 40.0273 43.4858 39.7305C43.0591 39.4274 42.5396 39.2759 41.9272 39.2759C41.3273 39.2759 40.8078 39.4274 40.3687 39.7305C39.9357 40.0335 39.6017 40.4634 39.3667 41.02C39.1317 41.5767 39.0142 42.2384 39.0142 43.0054V43.0239C39.0142 43.7847 39.1317 44.4434 39.3667 45C39.6017 45.5566 39.9357 45.9865 40.3687 46.2896C40.8078 46.5926 41.3273 46.7441 41.9272 46.7441ZM49.0059 47.9966V34.0806H50.6201V47.9966H49.0059ZM57.7173 48.1729C56.771 48.1729 55.9546 47.9626 55.2681 47.542C54.5877 47.1214 54.0651 46.5277 53.7002 45.7607C53.3353 44.9938 53.1528 44.0908 53.1528 43.0518V43.0425C53.1528 42.0096 53.3353 41.1066 53.7002 40.3335C54.0713 39.5542 54.5908 38.945 55.2588 38.5059C55.9329 38.0667 56.7184 37.8472 57.6152 37.8472C58.5244 37.8472 59.3037 38.0575 59.9531 38.478C60.6025 38.8986 61.1004 39.4831 61.4468 40.2314C61.7993 40.9798 61.9756 41.8519 61.9756 42.8477V43.4692H53.9878V42.189H61.1499L60.3521 43.3672V42.7271C60.3521 41.9416 60.2345 41.2983 59.9995 40.7974C59.7707 40.2902 59.4491 39.9129 59.0347 39.6655C58.6203 39.4119 58.144 39.2852 57.606 39.2852C57.0741 39.2852 56.5947 39.4181 56.168 39.6841C55.7474 39.9438 55.4134 40.3304 55.166 40.8438C54.9248 41.3509 54.8042 41.9787 54.8042 42.7271V43.3672C54.8042 44.0723 54.9217 44.6784 55.1567 45.1855C55.3979 45.6865 55.7412 46.07 56.1865 46.3359C56.6318 46.6019 57.1545 46.7349 57.7544 46.7349C58.2059 46.7349 58.5955 46.673 58.9233 46.5493C59.2573 46.4256 59.5326 46.2679 59.749 46.0762C59.9655 45.8783 60.1201 45.6772 60.2129 45.4731L60.2407 45.3896H61.855L61.8364 45.4639C61.7498 45.8102 61.5952 46.1442 61.3726 46.4658C61.1561 46.7874 60.8747 47.0781 60.5283 47.3379C60.182 47.5915 59.7738 47.7956 59.3037 47.9502C58.8337 48.0986 58.3049 48.1729 57.7173 48.1729ZM75.2607 48.3027C74.0485 48.3027 72.9971 48.0182 72.1064 47.4492C71.222 46.8802 70.5386 46.0731 70.0562 45.0278C69.5737 43.9826 69.3325 42.7456 69.3325 41.3169V41.2983C69.3325 39.8573 69.5737 38.6172 70.0562 37.5781C70.5386 36.5329 71.222 35.7257 72.1064 35.1567C72.9909 34.5877 74.0392 34.3032 75.2515 34.3032C76.1916 34.3032 77.0451 34.4857 77.812 34.8506C78.5851 35.2155 79.2222 35.7257 79.7231 36.3813C80.2241 37.0308 80.5396 37.7822 80.6694 38.6357V38.6543H78.9902L78.9717 38.6265C78.8232 38.0513 78.5728 37.5565 78.2202 37.1421C77.8677 36.7277 77.4378 36.4092 76.9307 36.1865C76.4297 35.9577 75.87 35.8433 75.2515 35.8433C74.3979 35.8433 73.6558 36.0659 73.0249 36.5112C72.394 36.9565 71.9054 37.5874 71.5591 38.4038C71.2189 39.214 71.0488 40.1789 71.0488 41.2983V41.3169C71.0488 42.424 71.2189 43.3857 71.5591 44.2021C71.9054 45.0186 72.394 45.6494 73.0249 46.0947C73.6558 46.54 74.401 46.7627 75.2607 46.7627C75.8854 46.7627 76.4513 46.6637 76.9585 46.4658C77.4657 46.2617 77.8924 45.971 78.2388 45.5938C78.5851 45.2165 78.8294 44.7681 78.9717 44.2485L78.9902 44.23H80.6787L80.6694 44.2485C80.521 45.0711 80.1994 45.7855 79.7046 46.3916C79.2098 46.9977 78.582 47.4678 77.8213 47.8018C77.0667 48.1357 76.2132 48.3027 75.2607 48.3027ZM83.2764 47.9966V34.0806H84.8906V47.9966H83.2764ZM87.9614 47.9966V38.0234H89.5757V47.9966H87.9614ZM88.7778 36.1216C88.4748 36.1216 88.215 36.0133 87.9985 35.7969C87.7821 35.5804 87.6738 35.3206 87.6738 35.0176C87.6738 34.7145 87.7821 34.4548 87.9985 34.2383C88.215 34.0218 88.4748 33.9136 88.7778 33.9136C89.0871 33.9136 89.3468 34.0218 89.5571 34.2383C89.7736 34.4548 89.8818 34.7145 89.8818 35.0176C89.8818 35.3206 89.7736 35.5804 89.5571 35.7969C89.3468 36.0133 89.0871 36.1216 88.7778 36.1216ZM96.6265 48.1729C95.6925 48.1729 94.8823 47.9626 94.1958 47.542C93.5093 47.1152 92.9774 46.5122 92.6001 45.7329C92.229 44.9536 92.0435 44.0382 92.0435 42.9868V42.9683C92.0435 41.9292 92.229 41.0293 92.6001 40.2686C92.9774 39.5016 93.5062 38.9079 94.1865 38.4873C94.873 38.0605 95.6833 37.8472 96.6172 37.8472C97.4212 37.8472 98.117 37.9925 98.7046 38.2832C99.2922 38.5677 99.7591 38.9512 100.105 39.4336C100.458 39.916 100.684 40.451 100.783 41.0386L100.792 41.0942H99.187L99.1777 41.0664C99.054 40.5716 98.7726 40.151 98.3335 39.8047C97.9006 39.4521 97.3285 39.2759 96.6172 39.2759C96.0173 39.2759 95.4977 39.4274 95.0586 39.7305C94.6257 40.0335 94.2886 40.4634 94.0474 41.02C93.8123 41.5705 93.6948 42.2199 93.6948 42.9683V42.9868C93.6948 43.7537 93.8154 44.4186 94.0566 44.9814C94.2979 45.5443 94.6349 45.9803 95.0679 46.2896C95.507 46.5926 96.0234 46.7441 96.6172 46.7441C97.2913 46.7441 97.8387 46.5988 98.2593 46.3081C98.686 46.0112 98.9891 45.5845 99.1685 45.0278L99.187 44.9722L100.783 44.9629L100.764 45.0649C100.634 45.6649 100.396 46.1999 100.05 46.6699C99.7035 47.1338 99.2458 47.5018 98.6768 47.7739C98.1077 48.0399 97.4243 48.1729 96.6265 48.1729ZM103.176 47.9966V34.0806H104.791V47.9966H103.176ZM109.457 47.9966L105.57 43.126L106.748 42.0869L111.47 47.9966H109.457ZM104.568 44.4248L104.503 42.3838H104.93L109.244 38.0234H111.201L106.47 42.6064L106.099 42.9497L104.568 44.4248ZM61.9478 71.0801C60.9396 71.0801 60.2036 70.8729 59.7397 70.4585C59.2821 70.0441 59.0532 69.3607 59.0532 68.4082V62.3594H57.4946V61.0234H59.0532V58.4351H60.7231V61.0234H62.8848V62.3594H60.7231V68.0371C60.7231 68.6185 60.8345 69.036 61.0571 69.2896C61.2798 69.5369 61.6478 69.6606 62.1611 69.6606C62.2972 69.6606 62.4147 69.6576 62.5137 69.6514C62.6188 69.6452 62.7425 69.6359 62.8848 69.6235V70.9873C62.7363 71.012 62.5817 71.0337 62.4209 71.0522C62.2663 71.0708 62.1086 71.0801 61.9478 71.0801ZM69.1748 71.1729C68.2347 71.1729 67.4214 70.9657 66.7349 70.5513C66.0483 70.1307 65.5164 69.5369 65.1392 68.77C64.7681 67.9969 64.5825 67.0815 64.5825 66.0239V66.0054C64.5825 64.9354 64.7681 64.0169 65.1392 63.25C65.5164 62.4769 66.0483 61.8831 66.7349 61.4688C67.4214 61.0544 68.2347 60.8472 69.1748 60.8472C70.1211 60.8472 70.9375 61.0544 71.624 61.4688C72.3105 61.8831 72.8394 62.4769 73.2104 63.25C73.5877 64.0169 73.7764 64.9354 73.7764 66.0054V66.0239C73.7764 67.0815 73.5877 67.9969 73.2104 68.77C72.8394 69.5369 72.3105 70.1307 71.624 70.5513C70.9437 70.9657 70.1273 71.1729 69.1748 71.1729ZM69.1841 69.7441C69.8088 69.7441 70.3376 69.5988 70.7705 69.3081C71.2096 69.0112 71.5436 68.5845 71.7725 68.0278C72.0075 67.4712 72.125 66.8032 72.125 66.0239V66.0054C72.125 65.2137 72.0075 64.5426 71.7725 63.9922C71.5436 63.4355 71.2096 63.0119 70.7705 62.7212C70.3314 62.4243 69.7995 62.2759 69.1748 62.2759C68.5501 62.2759 68.0182 62.4243 67.5791 62.7212C67.1462 63.0119 66.8122 63.4355 66.5771 63.9922C66.3483 64.5426 66.2339 65.2137 66.2339 66.0054V66.0239C66.2339 66.8032 66.3483 67.4712 66.5771 68.0278C66.8122 68.5845 67.1462 69.0112 67.5791 69.3081C68.0182 69.5988 68.5532 69.7441 69.1841 69.7441ZM82.4878 66.2188V64.7344H86.2451C87.2038 64.7344 87.946 64.487 88.4717 63.9922C88.9974 63.4912 89.2603 62.8016 89.2603 61.9233V61.9048C89.2603 61.0203 88.9974 60.3307 88.4717 59.8359C87.946 59.3411 87.2038 59.0938 86.2451 59.0938H82.4878V57.6094H86.6719C87.513 57.6094 88.2552 57.7887 88.8984 58.1475C89.5417 58.5062 90.0457 59.0072 90.4106 59.6504C90.7817 60.2936 90.9673 61.0389 90.9673 61.8862V61.9048C90.9673 62.7521 90.7817 63.5005 90.4106 64.1499C90.0457 64.7993 89.5417 65.3065 88.8984 65.6714C88.2552 66.0363 87.513 66.2188 86.6719 66.2188H82.4878ZM81.6528 70.9966V57.6094H83.3228V70.9966H81.6528ZM95.7544 71.1729C95.1235 71.1729 94.5576 71.0522 94.0566 70.811C93.5557 70.5698 93.1598 70.2266 92.8691 69.7812C92.5785 69.3359 92.4331 68.8133 92.4331 68.2134V68.1948C92.4331 67.3104 92.7485 66.6177 93.3794 66.1167C94.0103 65.6095 94.904 65.3219 96.0605 65.2539L99.7251 65.0312V66.3208L96.2554 66.5435C95.507 66.5868 94.9565 66.7445 94.604 67.0166C94.2576 67.2887 94.0845 67.6691 94.0845 68.1577V68.1763C94.0845 68.6772 94.2731 69.07 94.6504 69.3545C95.0339 69.6328 95.5163 69.772 96.0977 69.772C96.6419 69.772 97.1243 69.6637 97.5449 69.4473C97.9717 69.2246 98.3057 68.9246 98.5469 68.5474C98.7943 68.1701 98.918 67.7464 98.918 67.2764V64.1777C98.918 63.5654 98.7293 63.0954 98.3521 62.7676C97.981 62.4398 97.4243 62.2759 96.6821 62.2759C96.0822 62.2759 95.5905 62.3872 95.207 62.6099C94.8236 62.8263 94.57 63.1325 94.4463 63.5283L94.437 63.5562H92.8228L92.832 63.5005C92.9186 62.9748 93.1351 62.514 93.4814 62.1182C93.8278 61.7161 94.2762 61.4038 94.8267 61.1812C95.3833 60.9585 96.0203 60.8472 96.7378 60.8472C97.548 60.8472 98.2345 60.9801 98.7974 61.2461C99.3664 61.512 99.7962 61.8924 100.087 62.3872C100.384 62.882 100.532 63.4757 100.532 64.1685V70.9966H98.918V69.5122H98.7788C98.5747 69.8647 98.3211 70.1678 98.0181 70.4214C97.715 70.6688 97.3748 70.8574 96.9976 70.9873C96.6203 71.111 96.2059 71.1729 95.7544 71.1729ZM103.937 74.4756C103.832 74.4756 103.711 74.4694 103.575 74.457C103.445 74.4508 103.325 74.4385 103.213 74.4199V73.0933C103.306 73.1118 103.411 73.1242 103.529 73.1304C103.646 73.1366 103.758 73.1396 103.863 73.1396C104.327 73.1396 104.707 73.0252 105.004 72.7964C105.301 72.5675 105.539 72.1686 105.718 71.5996L105.904 71.0059L102.211 61.0234H103.937L106.989 70.1895L106.377 69.2432H107.11L106.498 70.1895L109.541 61.0234H111.238L107.351 71.6089C107.079 72.3449 106.791 72.9201 106.488 73.3345C106.191 73.755 105.839 74.0488 105.431 74.2158C105.029 74.389 104.531 74.4756 103.937 74.4756Z"
                        fill="white"
                      />
                    </g>
                    <defs>
                      <clipPath id="clip0_510_2806">
                        <rect width="129.96" height="104.653" fill="white" transform="translate(1.03967)" />
                      </clipPath>
                    </defs>
                  </svg>
                </div>
              )}
              <div className="flex justify-center items-center px-4 flex-col">
                <div className="pt-3 flex justify-between items-center w-full">
                  <div className="text-black text-[28px] tracking-wide">
                    <svg width="69" height="27" viewBox="0 0 69 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M12.5977 6.07227C12.7982 6.07227 13.14 6.10417 13.623 6.16797C14.1061 6.23177 14.6348 6.41406 15.209 6.71484C15.7923 7.00651 16.321 7.49414 16.7949 8.17773C16.7676 8.20508 16.6354 8.30534 16.3984 8.47852C16.1615 8.64258 15.8971 8.88867 15.6055 9.2168C15.3138 9.53581 15.0586 9.94596 14.8398 10.4473C14.6211 10.9395 14.5117 11.5273 14.5117 12.2109C14.5117 12.9948 14.6484 13.6602 14.9219 14.207C15.2044 14.7539 15.528 15.196 15.8926 15.5332C16.2663 15.8613 16.5944 16.1029 16.877 16.2578C17.1686 16.4128 17.3236 16.4948 17.3418 16.5039C17.3327 16.5404 17.2142 16.8639 16.9863 17.4746C16.7676 18.0853 16.403 18.7643 15.8926 19.5117C15.446 20.1589 14.9629 20.7559 14.4434 21.3027C13.9329 21.8496 13.3177 22.123 12.5977 22.123C12.1146 22.123 11.7181 22.0547 11.4082 21.918C11.0983 21.7721 10.7793 21.6309 10.4512 21.4941C10.123 21.3483 9.68099 21.2754 9.125 21.2754C8.58724 21.2754 8.13607 21.3483 7.77148 21.4941C7.41602 21.64 7.07422 21.7858 6.74609 21.9316C6.42708 22.0775 6.04883 22.1504 5.61133 22.1504C4.94596 22.1504 4.36263 21.8861 3.86133 21.3574C3.36003 20.8288 2.84505 20.1953 2.31641 19.457C1.70573 18.582 1.18164 17.5156 0.744141 16.2578C0.315755 14.9909 0.101562 13.7148 0.101562 12.4297C0.101562 11.0534 0.361328 9.90039 0.880859 8.9707C1.40039 8.0319 2.06576 7.32552 2.87695 6.85156C3.69727 6.36849 4.54492 6.12695 5.41992 6.12695C5.88477 6.12695 6.32227 6.20443 6.73242 6.35938C7.14258 6.50521 7.52539 6.6556 7.88086 6.81055C8.24544 6.96549 8.57357 7.04297 8.86523 7.04297C9.14779 7.04297 9.47591 6.96094 9.84961 6.79688C10.2233 6.63281 10.6426 6.47331 11.1074 6.31836C11.5723 6.1543 12.069 6.07227 12.5977 6.07227ZM11.8457 4.33594C11.4902 4.76432 11.0436 5.12435 10.5059 5.41602C9.9681 5.69857 9.45768 5.83984 8.97461 5.83984C8.87435 5.83984 8.77865 5.83073 8.6875 5.8125C8.67839 5.78516 8.66927 5.73503 8.66016 5.66211C8.65104 5.58919 8.64648 5.51172 8.64648 5.42969C8.64648 4.88281 8.76497 4.35417 9.00195 3.84375C9.23893 3.32422 9.50781 2.89583 9.80859 2.55859C10.1914 2.10286 10.6745 1.72461 11.2578 1.42383C11.8411 1.12305 12.3971 0.963542 12.9258 0.945312C12.9531 1.0638 12.9668 1.20508 12.9668 1.36914C12.9668 1.91602 12.862 2.44922 12.6523 2.96875C12.4427 3.47917 12.1738 3.9349 11.8457 4.33594ZM25.7066 15.2598V12.6895H30.7652C32.0868 12.6895 33.1122 12.3477 33.8414 11.6641C34.5797 10.9714 34.9488 10.0143 34.9488 8.79297V8.76562C34.9488 7.52604 34.5797 6.56445 33.8414 5.88086C33.1122 5.19727 32.0868 4.85547 30.7652 4.85547H25.7066V2.27148H31.5309C32.8251 2.27148 33.9599 2.54492 34.9352 3.0918C35.9195 3.62956 36.6897 4.38607 37.2457 5.36133C37.8017 6.32747 38.0797 7.45312 38.0797 8.73828V8.76562C38.0797 10.0508 37.8017 11.1855 37.2457 12.1699C36.6897 13.1452 35.9195 13.9062 34.9352 14.4531C33.9599 14.9909 32.8251 15.2598 31.5309 15.2598H25.7066ZM24.1754 22V2.27148H27.2379V22H24.1754ZM44.4211 22.2598C43.4641 22.2598 42.6255 22.0775 41.9055 21.7129C41.1854 21.3483 40.6249 20.8379 40.2238 20.1816C39.8228 19.5254 39.6223 18.7689 39.6223 17.9121V17.8848C39.6223 16.627 40.0871 15.6335 41.0168 14.9043C41.9556 14.166 43.2727 13.7467 44.968 13.6465L50.4094 13.3184V15.3965L45.3645 15.7109C44.4803 15.7656 43.7967 15.9798 43.3137 16.3535C42.8397 16.7181 42.6027 17.2057 42.6027 17.8164V17.8438C42.6027 18.4727 42.8397 18.9694 43.3137 19.334C43.7967 19.6986 44.4348 19.8809 45.2277 19.8809C45.9204 19.8809 46.5402 19.7396 47.0871 19.457C47.6431 19.1745 48.0806 18.7871 48.3996 18.2949C48.7186 17.7936 48.8781 17.2331 48.8781 16.6133V12.334C48.8781 11.541 48.632 10.9212 48.1398 10.4746C47.6477 10.0189 46.9413 9.79102 46.0207 9.79102C45.173 9.79102 44.4895 9.97331 43.9699 10.3379C43.4595 10.7025 43.1405 11.1719 43.0129 11.7461L42.9855 11.8691H40.1965L40.2102 11.7188C40.2831 10.8893 40.5611 10.1465 41.0441 9.49023C41.5272 8.82487 42.1971 8.30078 43.0539 7.91797C43.9107 7.53516 44.927 7.34375 46.1027 7.34375C47.2785 7.34375 48.2948 7.53971 49.1516 7.93164C50.0083 8.32357 50.6737 8.875 51.1477 9.58594C51.6216 10.2969 51.8586 11.1309 51.8586 12.0879V22H48.8781V19.7305H48.8234C48.5409 20.25 48.1763 20.7012 47.7297 21.084C47.2831 21.4577 46.7772 21.7493 46.2121 21.959C45.6561 22.1595 45.0591 22.2598 44.4211 22.2598ZM57.284 26.7988C57.0014 26.7988 56.7189 26.7852 56.4363 26.7578C56.1538 26.7305 55.9214 26.6986 55.7391 26.6621V24.3516C55.8484 24.3698 55.9852 24.388 56.1492 24.4062C56.3224 24.4336 56.5092 24.4473 56.7098 24.4473C57.4116 24.4473 57.9676 24.3288 58.3777 24.0918C58.797 23.8548 59.1251 23.39 59.3621 22.6973L59.6082 22.0137L54.3719 7.61719H57.5848L61.3992 19.9629L60.8797 19.3203H61.6043L61.0848 19.9629L64.9129 7.61719H68.0438L62.6844 22.6562C62.3289 23.6497 61.9096 24.4518 61.4266 25.0625C60.9526 25.6732 60.3784 26.1152 59.7039 26.3887C59.0385 26.6621 58.2319 26.7988 57.284 26.7988Z"
                        fill="black"
                      />
                    </svg>
                  </div>
                  <div
                    className="rounded-full h-6 w-6 flex items-center justify-center bg-[#dddddd]"
                    onClick={() => setOpenedModal(undefined)}
                  >
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M0.90625 2.74219C0.78125 2.61719 0.695312 2.46615 0.648438 2.28906C0.606771 2.11198 0.606771 1.9349 0.648438 1.75781C0.690104 1.57552 0.778646 1.41667 0.914062 1.28125C1.04427 1.15104 1.19792 1.0651 1.375 1.02344C1.55729 0.976562 1.73698 0.976562 1.91406 1.02344C2.09635 1.0651 2.25 1.14844 2.375 1.27344L11.0938 9.99219C11.224 10.1224 11.3099 10.276 11.3516 10.4531C11.3932 10.6302 11.3906 10.8099 11.3438 10.9922C11.3021 11.1693 11.2135 11.3229 11.0781 11.4531C10.9479 11.5885 10.7943 11.6797 10.6172 11.7266C10.4401 11.7682 10.263 11.7682 10.0859 11.7266C9.90885 11.6797 9.75521 11.5938 9.625 11.4688L0.90625 2.74219ZM0.90625 10L9.625 1.28125C9.75521 1.15104 9.90885 1.0651 10.0859 1.02344C10.263 0.976562 10.4401 0.976562 10.6172 1.02344C10.7943 1.0651 10.9479 1.15365 11.0781 1.28906C11.2135 1.41927 11.3021 1.57552 11.3438 1.75781C11.3906 1.9349 11.3932 2.11198 11.3516 2.28906C11.3099 2.46615 11.224 2.61979 11.0938 2.75L2.375 11.4688C2.25 11.5938 2.09635 11.6797 1.91406 11.7266C1.73698 11.7682 1.55729 11.7682 1.375 11.7266C1.19792 11.6797 1.04427 11.5911 0.914062 11.4609C0.778646 11.3255 0.690104 11.1693 0.648438 10.9922C0.606771 10.8099 0.606771 10.6302 0.648438 10.4531C0.695312 10.276 0.78125 10.125 0.90625 10Z"
                        fill="#3C3C43"
                        fillOpacity="0.6"
                      />
                    </svg>
                  </div>
                </div>
                <div className="bg-white rounded-[12px] w-full mt-3 flex justify-between p-4 gap-1">
                  <div>
                    <svg width="40" height="25" viewBox="0 0 40 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <rect width="40" height="25" rx="2" fill="#111111" />
                      <g clipPath="url(#clip0_384_22802)">
                        <path
                          d="M19.509 4.99982C21.85 4.99982 24.191 4.99968 26.532 4.99982C26.9825 4.99982 27.0017 5.02904 27 5.4681C26.9932 7.3124 26.9928 9.1567 26.9894 11.001C26.9886 11.4426 26.98 11.45 26.5386 11.4498C26.0922 11.4498 25.6459 11.4496 25.1995 11.4503C24.8139 11.4508 24.7854 11.4226 24.7852 11.0214C24.7847 10.164 24.7759 9.3066 24.7901 8.44946C24.7947 8.17093 24.6861 8.06215 24.4234 8.01852C22.8105 7.75061 21.1994 7.47138 19.5877 7.1962C19.5486 7.18949 19.5057 7.17229 19.4706 7.18208C19.3922 7.20403 19.3176 7.23983 19.2413 7.26989C19.2872 7.33729 19.3181 7.43111 19.3816 7.46789C19.7765 7.69636 20.1785 7.91267 20.5787 8.13206C21.0225 8.37536 21.4565 8.63977 21.9145 8.85202C22.1957 8.98234 22.2753 9.16048 22.2747 9.45244C22.2704 11.3065 22.2841 13.1606 22.2839 15.0146C22.2839 16.8789 22.2743 18.743 22.2693 20.6073C22.2681 21.0612 22.2231 21.0889 21.8197 20.8562C20.1518 19.8946 18.4878 18.9261 16.815 17.9731C16.5817 17.8402 16.5086 17.6827 16.5099 17.4245C16.5189 15.6002 16.5149 13.7757 16.515 11.9513C16.515 11.4869 16.4856 11.4532 16.0346 11.4531C14.8443 11.4525 13.654 11.4539 12.4637 11.4567C12.0269 11.4578 12 11.4364 12 11.0133C12.0004 9.13909 12.0013 7.26486 12.0036 5.39063C12.004 5.03449 12.0384 5.00066 12.3969 5.00052C14.7676 4.99968 17.1383 5.0001 19.509 4.99982Z"
                          fill="white"
                        />
                      </g>
                      <defs>
                        <clipPath id="clip0_384_22802">
                          <rect width="15" height="16" fill="white" transform="translate(12 5)" />
                        </clipPath>
                      </defs>
                    </svg>
                  </div>
                  <div>
                    <div className="text-black text-lg leading-snug">Credit Card</div>
                    <div className="text-[#3c3c43]/60 text-base leading-tight">•••• 1234</div>
                    <div className="text-[#3c3c43]/60 text-base leading-tight overflow-hidden whitespace-nowrap text-ellipsis">
                      27 Fredrick Butte Rd, Brothers O...
                    </div>
                  </div>
                  <div className="flex flex-col justify-center items-center">
                    <ChevronRight size={24} />
                  </div>
                </div>
                <div className="bg-white rounded-[12px] mt-2 w-full p-4 flex justify-between">
                  <div className="ltext-black">Change Payment Method</div>
                  <ChevronRight size={24} />
                </div>
                <div className="mt-1 flex w-full justify-between items-center p-4">
                  <div>
                    <div className=" text-[#3c3c43]/60 text-base text-left">Pay</div>
                    <div className="text-black text-3xl font-medium">{1200}</div>
                  </div>
                  <div>
                    <ChevronRight size={24} />
                  </div>
                </div>
                <div className="border-b border-[#c6c6c8] h-[1px] ml-[-16px] w-full" />
                <div className="mb-8">
                  <div className="mt-3 flex justify-center">
                    {done ? (
                      <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="16" cy="16" r="15.25" stroke="#007AFF" strokeWidth="1.5" />
                        <path
                          d="M9.04346 16.1911L14.1959 22.4348L21.7391 10.4348"
                          stroke="#007AFF"
                          strokeWidth="1.5"
                          strokeLinecap="round"
                          strokeLinejoin="round"
                        />
                      </svg>
                    ) : (
                      <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <mask id="mask0_536_418" maskUnits="userSpaceOnUse" x="2" y="2" width="32" height="33">
                          <rect width="32" height="32" rx="16" transform="matrix(-1 0 0 1 34 2.25781)" fill="white" />
                        </mask>
                        <g mask="url(#mask0_536_418)">
                          <rect
                            width="16"
                            height="26.6667"
                            rx="2"
                            transform="matrix(-1 0 0 1 17.238 12.9246)"
                            fill="#BFCFE3"
                            fillOpacity="0.2"
                          />
                          <path
                            fillRule="evenodd"
                            clipRule="evenodd"
                            d="M15.3333 11.7817C17.0165 11.7817 18.3809 13.1462 18.3809 14.8294V15.2103H18.6428C18.919 15.2103 19.1428 15.4342 19.1428 15.7103V21.5675C19.1428 21.8436 18.919 22.0675 18.6428 22.0675H18.3809V39.2103C18.3809 40.8935 17.0165 42.2579 15.3333 42.2579H1.61903C-0.0641233 42.2579 -1.42859 40.8935 -1.42859 39.2103V14.8294C-1.42859 13.1462 -0.0641233 11.7817 1.61903 11.7817H15.3333ZM15.0476 12.9246H1.90474C0.694978 12.9246 -0.285732 13.921 -0.285732 15.1502V38.8895C-0.285732 40.1187 0.694978 41.1151 1.90474 41.1151H15.0476C16.2574 41.1151 17.2381 40.1187 17.2381 38.8895V15.1502C17.2381 13.921 16.2574 12.9246 15.0476 12.9246Z"
                            fill="#007AFF"
                          />
                        </g>
                        <rect
                          x="0.75"
                          y="-0.75"
                          width="33.5"
                          height="33.5"
                          rx="16.75"
                          transform="matrix(-1 0 0 1 35.5 2.25781)"
                          stroke="#007AFF"
                          strokeWidth="1.5"
                        />
                        <path
                          d="M20.6666 17.8794C20.6666 17.6666 20.7577 17.4434 20.8993 17.3033L24.1824 13.9354C24.3442 13.7693 24.5314 13.6863 24.7186 13.6863C25.1637 13.6863 25.4672 14.0028 25.4672 14.4232C25.4672 14.6619 25.3661 14.8435 25.2244 14.9836L24.0761 16.1668L23.029 17.158L24.1217 17.0957H29.0153C29.4908 17.0957 29.8095 17.4123 29.8095 17.8794C29.8095 18.3464 29.4908 18.6578 29.0153 18.6578H24.1217L23.029 18.6007L24.0761 19.5867L25.2244 20.7647C25.3661 20.91 25.4672 21.0916 25.4672 21.3251C25.4672 21.7455 25.1637 22.0672 24.7186 22.0672C24.5314 22.0672 24.3442 21.9842 24.1874 21.8233L20.8993 18.4502C20.7577 18.3101 20.6666 18.0869 20.6666 17.8794Z"
                          fill="#007AFF"
                        />
                      </svg>
                    )}
                  </div>
                  <div className="text-center text-black text-base">{done ? 'Done' : 'Confirm with Side Button'}</div>
                </div>
              </div>
            </motion.div>
          </AlertDialogPortal>
        </AlertDialog>
      )}
    </AnimatePresence>
  );
};
