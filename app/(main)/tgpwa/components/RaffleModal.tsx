'use client';
import { VisuallyHidden } from '@radix-ui/react-visually-hidden';
import { useAtom } from 'jotai';
import lottie from 'lottie-web';

import { useEffect, useRef } from 'react';

import animationData from '../assets/lottie.json';
import { useStartParam } from '../hooks';

import { openedModalAtom } from '@/state/modal';
import {
  AlertDialog,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogOverlay,
  AlertDialogTitle,
  AlertDialogFooter,
  AlertDialogHeader,
} from '@/ui-components/AlertDialog';

const RaffleTicket = (props: any) => {
  return (
    <svg xmlns="http://www.w3.org/2000/svg" width={311} height={145} fill="none" {...props}>
      <g clipPath="url(#a)">
        <path
          fill="url(#b)"
          d="M307.655 117.041c0-1.77 1.4-3.19 3.15-3.25v-6.25a3.256 3.256 0 0 1-3.15-3.25c0-1.76 1.4-3.19 3.15-3.25v-6.25a3.256 3.256 0 0 1-3.15-3.25c0-1.76 1.4-3.19 3.15-3.25v-6.25a3.256 3.256 0 0 1-3.15-3.25c0-1.76 1.4-3.19 3.15-3.25v-6.25c-1.75-.07-3.15-1.49-3.15-3.25s1.4-3.19 3.15-3.25v-6.25a3.256 3.256 0 0 1-3.15-3.25c0-1.76 1.4-3.19 3.15-3.25v-6.25a3.256 3.256 0 0 1-3.15-3.25c0-1.76 1.4-3.19 3.15-3.25v-6.25a3.256 3.256 0 0 1-3.15-3.25c0-1.76 1.4-3.19 3.15-3.25v-5.72c-9.65-.89-17.21-8.92-17.35-18.77H17.545c-.14 9.84-7.71 17.88-17.35 18.77v5.71c1.79.02 3.24 1.47 3.24 3.27s-1.45 3.25-3.24 3.26v6.23a3.27 3.27 0 0 1 3.24 3.26c0 1.79-1.45 3.25-3.24 3.26v6.23c1.79.01 3.24 1.47 3.24 3.26 0 1.79-1.45 3.25-3.24 3.26v6.23c1.79.01 3.24 1.47 3.24 3.26 0 1.79-1.45 3.25-3.24 3.26v6.23a3.27 3.27 0 0 1 3.24 3.26c0 1.79-1.45 3.25-3.24 3.26v6.23c1.79.01 3.24 1.47 3.24 3.26 0 1.79-1.45 3.25-3.24 3.26v6.23c1.79.01 3.24 1.47 3.24 3.26 0 1.79-1.45 3.25-3.24 3.26v6.23a3.27 3.27 0 0 1 3.24 3.26c0 1.79-1.45 3.25-3.24 3.26v5.04c9.74.89 17.37 9.08 17.37 19.05 0 .13-.02.26-.02.39h275.91c0-.13-.02-.26-.02-.39 0-9.97 7.63-18.15 17.36-19.05v-5.05a3.256 3.256 0 0 1-3.15-3.25l.01-.01Z"
        />
        <path
          fill="#fff"
          d="M100.195 39.336V43.5c-.141.208-.364.443-.672.703-.307.255-.732.48-1.273.672-.537.188-1.23.281-2.078.281a4.99 4.99 0 0 1-1.914-.36 4.316 4.316 0 0 1-1.508-1.062 4.98 4.98 0 0 1-.985-1.703c-.229-.672-.343-1.432-.343-2.281v-.883c0-.849.099-1.607.297-2.273.203-.667.5-1.232.89-1.696.39-.468.87-.823 1.438-1.062.567-.245 1.218-.367 1.953-.367.87 0 1.596.15 2.18.453a3.367 3.367 0 0 1 1.374 1.234 4.47 4.47 0 0 1 .641 1.797h-1.508a3.166 3.166 0 0 0-.406-1.125 2.172 2.172 0 0 0-.852-.812c-.37-.209-.846-.313-1.43-.313-.525 0-.981.096-1.366.29a2.516 2.516 0 0 0-.954.827c-.25.36-.437.795-.562 1.305-.12.51-.18 1.086-.18 1.727v.898c0 .656.076 1.242.227 1.758.156.515.377.956.664 1.32.286.36.627.633 1.023.82.401.188.844.282 1.328.282.537 0 .972-.045 1.305-.133.334-.094.594-.203.781-.328.188-.13.331-.253.43-.367v-2.547h-2.633v-1.22h4.133ZM104.047 33v12h-1.453V33h1.453Zm7.492 10.047v-6.5h1.453V45h-1.383l-.07-1.953Zm.273-1.781.602-.016c0 .563-.06 1.083-.18 1.563a3.352 3.352 0 0 1-.562 1.234 2.666 2.666 0 0 1-1.024.82c-.422.193-.935.29-1.539.29-.411 0-.789-.06-1.133-.18a2.27 2.27 0 0 1-.875-.555 2.528 2.528 0 0 1-.57-.977c-.13-.4-.195-.883-.195-1.445v-5.453h1.445v5.469c0 .38.042.695.125.945.089.245.206.44.352.586.151.14.317.24.5.297.187.057.38.086.578.086.614 0 1.101-.117 1.461-.352.359-.24.617-.56.773-.96a3.62 3.62 0 0 0 .242-1.352Zm3-.399v-.18c0-.609.089-1.174.266-1.695.177-.526.432-.982.766-1.367.333-.39.736-.693 1.21-.906a3.761 3.761 0 0 1 1.594-.328c.594 0 1.128.109 1.602.328.479.213.885.515 1.219.906.338.385.596.841.773 1.367.177.521.266 1.086.266 1.696v.18c0 .609-.089 1.174-.266 1.694-.177.521-.435.977-.773 1.368a3.55 3.55 0 0 1-1.211.906c-.469.214-1 .32-1.594.32a3.858 3.858 0 0 1-1.602-.32 3.615 3.615 0 0 1-1.218-.906 4.117 4.117 0 0 1-.766-1.367 5.237 5.237 0 0 1-.266-1.696Zm1.446-.18v.18c0 .422.049.82.148 1.196.099.37.247.697.445.984.203.286.456.513.758.68.302.161.654.242 1.055.242.396 0 .742-.081 1.039-.242.302-.167.552-.394.75-.68.198-.287.346-.615.445-.984.104-.376.156-.774.156-1.196v-.18c0-.416-.052-.81-.156-1.18a3.041 3.041 0 0 0-.453-.991 2.156 2.156 0 0 0-.75-.688 2.105 2.105 0 0 0-1.047-.25c-.396 0-.745.083-1.047.25a2.247 2.247 0 0 0-.75.688 3.136 3.136 0 0 0-.445.992c-.099.37-.148.763-.148 1.18Zm9.507-2.335V45h-1.445v-8.453h1.367l.078 1.805Zm-.343 2.101-.602-.023a5.07 5.07 0 0 1 .258-1.602c.167-.495.401-.924.703-1.289a3.128 3.128 0 0 1 1.078-.844 3.183 3.183 0 0 1 1.399-.304c.416 0 .791.057 1.125.172.333.109.617.286.851.53.24.245.422.563.547.954.125.385.188.857.188 1.414V45h-1.454v-5.555c0-.442-.065-.797-.195-1.062a1.2 1.2 0 0 0-.57-.586c-.25-.125-.558-.188-.922-.188-.359 0-.688.076-.984.227-.292.151-.545.36-.758.625a3.11 3.11 0 0 0-.492.914 3.329 3.329 0 0 0-.172 1.078Zm12.406-6.828h1.461l3.726 9.273 3.719-9.273h1.469L143.578 45h-1.141l-4.609-11.375Zm-.477 0h1.289l.211 6.938V45h-1.5V33.625Zm10.032 0h1.289V45h-1.5v-4.438l.211-6.937Zm3.336 7.242v-.18c0-.609.088-1.174.265-1.695.177-.526.432-.982.766-1.367.333-.39.737-.693 1.211-.906a3.757 3.757 0 0 1 1.593-.328c.594 0 1.128.109 1.602.328.479.213.885.515 1.219.906.338.385.596.841.773 1.367.177.521.266 1.086.266 1.696v.18c0 .609-.089 1.174-.266 1.694-.177.521-.435.977-.773 1.368a3.55 3.55 0 0 1-1.211.906c-.469.214-1 .32-1.594.32-.594 0-1.128-.106-1.601-.32a3.619 3.619 0 0 1-1.219-.906 4.117 4.117 0 0 1-.766-1.367 5.237 5.237 0 0 1-.265-1.696Zm1.445-.18v.18c0 .422.049.82.148 1.196.099.37.248.697.446.984.203.286.455.513.757.68.302.161.654.242 1.055.242.396 0 .742-.081 1.039-.242.302-.167.552-.394.75-.68.198-.287.346-.615.445-.984.105-.376.157-.774.157-1.196v-.18a4.3 4.3 0 0 0-.157-1.18 3.041 3.041 0 0 0-.453-.991 2.156 2.156 0 0 0-.75-.688 2.105 2.105 0 0 0-1.047-.25c-.395 0-.744.083-1.046.25a2.247 2.247 0 0 0-.75.688 3.138 3.138 0 0 0-.446.992c-.099.37-.148.763-.148 1.18Zm9.508-2.335V45h-1.446v-8.453h1.368l.078 1.805Zm-.344 2.101-.602-.023a5.098 5.098 0 0 1 .258-1.602c.167-.495.401-.924.703-1.289a3.137 3.137 0 0 1 2.477-1.148c.416 0 .791.057 1.125.172.333.109.617.286.851.53.24.245.422.563.547.954.125.385.188.857.188 1.414V45h-1.453v-5.555c0-.442-.065-.797-.196-1.062a1.2 1.2 0 0 0-.57-.586c-.25-.125-.557-.188-.922-.188a2.14 2.14 0 0 0-.984.227c-.292.151-.545.36-.758.625-.208.266-.372.57-.492.914a3.329 3.329 0 0 0-.172 1.078Zm11.25 4.703a4.158 4.158 0 0 1-1.602-.297 3.632 3.632 0 0 1-1.226-.851 3.776 3.776 0 0 1-.781-1.297 4.74 4.74 0 0 1-.274-1.64v-.329c0-.687.102-1.3.305-1.836.203-.541.479-1 .828-1.375a3.553 3.553 0 0 1 1.187-.851c.443-.193.901-.29 1.375-.29.605 0 1.125.105 1.563.313.443.208.805.5 1.086.875.281.37.489.807.625 1.313.135.5.203 1.047.203 1.64v.649h-6.313V40h4.868v-.11a3.592 3.592 0 0 0-.235-1.093 1.96 1.96 0 0 0-.625-.875c-.286-.23-.677-.344-1.172-.344a1.966 1.966 0 0 0-1.617.82 3.08 3.08 0 0 0-.461.993c-.109.39-.164.84-.164 1.351v.328c0 .401.055.779.164 1.133.115.35.279.656.492.922.219.266.482.474.79.625.312.151.666.227 1.062.227.51 0 .943-.105 1.297-.313a3.22 3.22 0 0 0 .93-.836l.875.695c-.183.276-.414.54-.696.79a3.31 3.31 0 0 1-1.039.609c-.406.156-.888.234-1.445.234Zm7.242-1.031 2.352-7.578h1.547l-3.391 9.758a5.251 5.251 0 0 1-.313.672 3.213 3.213 0 0 1-.484.695 2.3 2.3 0 0 1-.719.531c-.276.14-.607.211-.992.211a2.61 2.61 0 0 1-.437-.047 4.132 4.132 0 0 1-.375-.078L177 47.117c.041.005.107.01.195.016a2.321 2.321 0 0 0 1.031-.117c.229-.084.422-.227.578-.43.162-.198.3-.471.415-.82l.601-1.641Zm-1.726-7.578 2.195 6.562.375 1.524-1.039.531-3.11-8.617h1.579ZM74.031 111.312V113h-6.047v-1.688h6.047Zm-5.39-9.687V113h-2.15v-11.375h2.15Zm4.6 4.695v1.649h-5.257v-1.649h5.258Zm.767-4.695v1.695h-6.024v-1.695h6.024Zm3.96 9.813 1.97-6.891h2.156L79.195 113h-1.312l.086-1.562Zm-1.437-6.891 1.992 6.906.07 1.547h-1.32l-2.906-8.453h2.164Zm10.336 8.609c-.64 0-1.216-.104-1.727-.312a3.812 3.812 0 0 1-1.304-.867 3.986 3.986 0 0 1-.82-1.305 4.55 4.55 0 0 1-.282-1.61v-.312c0-.651.094-1.242.281-1.773.188-.537.454-.998.797-1.383a3.497 3.497 0 0 1 1.235-.891 3.941 3.941 0 0 1 1.586-.312c.599 0 1.127.101 1.586.304.458.198.84.479 1.148.844.307.365.539.802.695 1.313.157.505.235 1.065.235 1.679v.867h-6.625v-1.421h4.593v-.157a2.488 2.488 0 0 0-.187-.898 1.433 1.433 0 0 0-.531-.656c-.24-.167-.55-.25-.93-.25-.307 0-.576.067-.805.203-.224.13-.411.317-.562.562-.146.24-.255.526-.328.86-.073.333-.11.703-.11 1.109v.312c0 .355.047.683.14.985.1.302.243.565.43.789.193.219.422.391.688.516.27.119.578.179.922.179a2.68 2.68 0 0 0 1.172-.25c.354-.172.661-.424.922-.758l1.039 1.079a3.706 3.706 0 0 1-1.797 1.336c-.422.145-.909.218-1.461.218Zm6.875-6.883V113h-2.063v-8.453h1.954l.109 1.726Zm2.57-1.781-.031 1.922a3.768 3.768 0 0 0-.39-.047 5.632 5.632 0 0 0-.4-.015 2.42 2.42 0 0 0-.835.132c-.24.084-.44.206-.602.368a1.617 1.617 0 0 0-.359.593c-.083.229-.13.49-.14.782l-.446-.055c0-.537.055-1.034.164-1.492.11-.459.268-.86.477-1.203.208-.344.469-.61.781-.797a2.064 2.064 0 0 1 1.094-.289c.114 0 .237.01.367.031.135.016.242.039.32.07Zm3.75 7.57 2.266-7.515h2.211l-3.391 9.734a6.542 6.542 0 0 1-.304.68 2.88 2.88 0 0 1-.485.695 2.324 2.324 0 0 1-.765.547c-.303.141-.67.211-1.102.211-.188 0-.354-.013-.5-.039a6.07 6.07 0 0 1-.461-.102v-1.546c.052.005.112.007.18.007.073.006.135.008.187.008.302 0 .552-.036.75-.109a.991.991 0 0 0 .477-.336 1.87 1.87 0 0 0 .312-.594l.625-1.641Zm-1.117-7.515 1.914 6.226.336 2.18-1.422.258-3.054-8.664h2.226Zm6.102 4.312v-.164c0-.619.088-1.19.265-1.711.177-.526.435-.981.774-1.367a3.47 3.47 0 0 1 1.242-.898c.489-.219 1.047-.328 1.672-.328.635 0 1.198.109 1.687.328.495.213.912.513 1.25.898.339.386.597.841.774 1.367.177.521.265 1.092.265 1.711v.164c0 .615-.088 1.185-.265 1.711a4.054 4.054 0 0 1-.774 1.368 3.482 3.482 0 0 1-1.242.898c-.49.213-1.049.32-1.68.32-.625 0-1.185-.107-1.679-.32a3.469 3.469 0 0 1-1.25-.898 4.054 4.054 0 0 1-.774-1.368 5.332 5.332 0 0 1-.265-1.711Zm2.062-.164v.164c0 .37.037.717.11 1.039.072.323.184.607.335.852.151.245.347.438.586.578.245.136.537.203.875.203.334 0 .62-.067.86-.203a1.68 1.68 0 0 0 .586-.578c.156-.245.271-.529.343-.852.073-.322.11-.669.11-1.039v-.164c0-.364-.037-.705-.11-1.023a2.644 2.644 0 0 0-.343-.852 1.646 1.646 0 0 0-1.461-.804c-.334 0-.62.073-.86.218a1.67 1.67 0 0 0-.586.586 2.753 2.753 0 0 0-.335.852c-.073.318-.11.659-.11 1.023Zm9.391-2.343V113h-2.063v-8.453h1.938l.125 1.805Zm-.328 2.117h-.61a5.585 5.585 0 0 1 .25-1.672c.162-.5.388-.93.68-1.289.297-.36.648-.636 1.055-.828a3.125 3.125 0 0 1 1.359-.289c.406 0 .773.057 1.102.171.328.115.609.297.843.547.24.25.422.579.547.985.13.401.196.896.196 1.484V113h-2.079v-5.438c0-.385-.057-.69-.171-.914a.96.96 0 0 0-.485-.476c-.208-.094-.466-.141-.773-.141-.318 0-.597.065-.836.196a1.718 1.718 0 0 0-.594.523 2.58 2.58 0 0 0-.359.773 3.408 3.408 0 0 0-.125.946Zm11.039 4.687c-.641 0-1.216-.104-1.727-.312a3.823 3.823 0 0 1-1.305-.867 3.993 3.993 0 0 1-.82-1.305 4.56 4.56 0 0 1-.281-1.61v-.312c0-.651.094-1.242.281-1.773.188-.537.453-.998.797-1.383a3.5 3.5 0 0 1 1.234-.891 3.945 3.945 0 0 1 1.586-.312c.599 0 1.128.101 1.586.304.459.198.841.479 1.149.844.307.365.539.802.695 1.313.156.505.234 1.065.234 1.679v.867h-6.625v-1.421h4.594v-.157a2.492 2.492 0 0 0-.187-.898 1.434 1.434 0 0 0-.532-.656c-.239-.167-.549-.25-.929-.25-.308 0-.576.067-.805.203-.224.13-.411.317-.562.562a2.79 2.79 0 0 0-.329.86 5.193 5.193 0 0 0-.109 1.109v.312c0 .355.047.683.141.985.099.302.242.565.429.789.193.219.422.391.688.516.271.119.578.179.922.179.432 0 .823-.083 1.172-.25a2.6 2.6 0 0 0 .921-.758l1.04 1.079a3.705 3.705 0 0 1-1.797 1.336c-.422.145-.909.218-1.461.218ZM133.375 101v1.148c0 .329-.063.672-.188 1.032-.12.354-.286.692-.5 1.015a3.893 3.893 0 0 1-.711.821l-1-.602c.209-.318.378-.656.508-1.016.136-.364.203-.778.203-1.242V101h1.688Zm4.937 9.688a.845.845 0 0 0-.14-.477c-.094-.141-.271-.268-.532-.383-.255-.12-.63-.232-1.125-.336a8.437 8.437 0 0 1-1.211-.351 3.948 3.948 0 0 1-.953-.508 2.312 2.312 0 0 1-.625-.711 2.008 2.008 0 0 1-.218-.953c0-.349.075-.677.226-.985.151-.312.37-.586.656-.82.287-.24.636-.427 1.047-.562a4.278 4.278 0 0 1 1.391-.211c.719 0 1.336.117 1.851.351.521.235.92.557 1.196.969.276.406.414.865.414 1.375h-2.063c0-.224-.052-.427-.156-.609a1.07 1.07 0 0 0-.461-.438c-.208-.115-.471-.172-.789-.172-.286 0-.529.047-.726.141a1.063 1.063 0 0 0-.438.367.893.893 0 0 0-.148.5c0 .135.026.258.078.367a.88.88 0 0 0 .273.289c.125.089.294.17.508.242.219.073.487.144.805.211.63.125 1.179.292 1.648.5.474.204.844.474 1.109.813.266.338.399.771.399 1.297 0 .375-.081.718-.242 1.031a2.4 2.4 0 0 1-.703.805 3.573 3.573 0 0 1-1.102.539 5.144 5.144 0 0 1-1.445.187c-.776 0-1.433-.138-1.969-.414-.537-.281-.943-.635-1.219-1.062-.276-.433-.414-.881-.414-1.344h1.977c.015.328.104.591.265.789.162.198.365.341.61.43.25.083.513.125.789.125.312 0 .575-.042.789-.125.213-.089.375-.206.484-.352a.852.852 0 0 0 .164-.515Zm12.227.515v-3.898c0-.287-.05-.534-.149-.743a1.076 1.076 0 0 0-.453-.484c-.203-.114-.461-.172-.773-.172-.276 0-.518.047-.727.141a1.068 1.068 0 0 0-.468.398c-.11.167-.165.36-.165.578h-2.07c0-.349.083-.679.25-.992.167-.317.404-.599.711-.843.313-.25.685-.446 1.117-.586a4.777 4.777 0 0 1 1.469-.211c.641 0 1.211.109 1.711.328a2.59 2.59 0 0 1 1.187.969c.292.432.438.976.438 1.632v3.688c0 .422.026.784.078 1.086a3 3 0 0 0 .25.773V113h-2.101a3.11 3.11 0 0 1-.227-.812 6.394 6.394 0 0 1-.078-.985Zm.289-3.351.016 1.226h-1.305c-.323 0-.607.034-.852.102a1.56 1.56 0 0 0-.601.281 1.14 1.14 0 0 0-.352.437 1.333 1.333 0 0 0-.117.571c0 .208.047.396.141.562.099.167.239.3.421.399.188.093.407.14.657.14.364 0 .682-.073.953-.218a1.88 1.88 0 0 0 .633-.547c.151-.214.231-.417.242-.61l.594.891c-.073.213-.183.44-.329.68a3.07 3.07 0 0 1-.562.672c-.229.208-.505.38-.828.515a2.881 2.881 0 0 1-1.125.203 3.204 3.204 0 0 1-1.469-.328 2.607 2.607 0 0 1-1.023-.898 2.31 2.31 0 0 1-.375-1.297c0-.448.083-.844.25-1.188.166-.343.414-.633.742-.867.328-.239.734-.419 1.219-.539a6.808 6.808 0 0 1 1.679-.187h1.391Zm10.586 2.968 2.265-9.195h1.227l.078 1.937-2.422 9.438h-1.297l.149-2.18Zm-1.43-9.195 1.86 9.164V113h-1.415l-2.578-11.375h2.133Zm7.352 9.125 1.828-9.125h2.14L168.726 113h-1.414l.024-2.25Zm-1.844-9.125 2.266 9.227.132 2.148h-1.296l-2.415-9.445.094-1.93h1.219Zm9.203 2.922V113h-2.07v-8.453h2.07Zm-2.211-2.211c0-.307.104-.563.313-.766.213-.203.5-.304.859-.304s.643.101.852.304c.213.203.32.459.32.766 0 .302-.107.555-.32.758-.209.203-.493.304-.852.304s-.646-.101-.859-.304a1.014 1.014 0 0 1-.313-.758Zm6.203 4.016V113h-2.062v-8.453h1.937l.125 1.805Zm-.328 2.117h-.609a5.553 5.553 0 0 1 .25-1.672c.161-.5.388-.93.679-1.289.297-.36.649-.636 1.055-.828a3.13 3.13 0 0 1 1.36-.289c.406 0 .773.057 1.101.171.328.115.609.297.844.547.239.25.422.579.547.985.13.401.195.896.195 1.484V113h-2.078v-5.438c0-.385-.057-.69-.172-.914a.958.958 0 0 0-.484-.476 1.885 1.885 0 0 0-.774-.141c-.318 0-.596.065-.836.196a1.723 1.723 0 0 0-.593.523 2.558 2.558 0 0 0-.36.773 3.446 3.446 0 0 0-.125.946Zm9.266-2.117V113h-2.063v-8.453h1.938l.125 1.805Zm-.328 2.117h-.61a5.585 5.585 0 0 1 .25-1.672c.162-.5.388-.93.68-1.289.297-.36.648-.636 1.055-.828a3.125 3.125 0 0 1 1.359-.289c.406 0 .773.057 1.102.171.328.115.609.297.843.547.24.25.422.579.547.985.13.401.196.896.196 1.484V113h-2.079v-5.438c0-.385-.057-.69-.171-.914a.96.96 0 0 0-.485-.476c-.208-.094-.466-.141-.773-.141-.318 0-.597.065-.836.196a1.718 1.718 0 0 0-.594.523 2.58 2.58 0 0 0-.359.773 3.408 3.408 0 0 0-.125.946Zm11.039 4.687c-.641 0-1.216-.104-1.727-.312a3.823 3.823 0 0 1-1.305-.867 3.993 3.993 0 0 1-.82-1.305 4.56 4.56 0 0 1-.281-1.61v-.312c0-.651.094-1.242.281-1.773.188-.537.453-.998.797-1.383a3.5 3.5 0 0 1 1.234-.891 3.945 3.945 0 0 1 1.586-.312c.599 0 1.128.101 1.586.304.459.198.841.479 1.149.844.307.365.539.802.695 1.313.156.505.234 1.065.234 1.679v.867h-6.625v-1.421h4.594v-.157a2.492 2.492 0 0 0-.187-.898 1.434 1.434 0 0 0-.532-.656c-.239-.167-.549-.25-.929-.25-.308 0-.576.067-.805.203-.224.13-.411.317-.562.562a2.79 2.79 0 0 0-.329.86 5.193 5.193 0 0 0-.109 1.109v.312c0 .355.047.683.141.985.099.302.242.565.429.789.193.219.422.391.688.516.271.119.578.179.922.179.432 0 .823-.083 1.172-.25a2.6 2.6 0 0 0 .921-.758l1.04 1.079a3.705 3.705 0 0 1-1.797 1.336c-.422.145-.909.218-1.461.218Zm6.875-6.883V113h-2.063v-8.453h1.953l.11 1.726Zm2.57-1.781-.031 1.922a3.784 3.784 0 0 0-.391-.047 5.606 5.606 0 0 0-.398-.015c-.318 0-.597.044-.836.132-.24.084-.44.206-.602.368a1.615 1.615 0 0 0-.359.593c-.084.229-.13.49-.141.782l-.445-.055c0-.537.055-1.034.164-1.492.109-.459.268-.86.477-1.203.208-.344.468-.61.781-.797a2.062 2.062 0 0 1 1.094-.289c.114 0 .236.01.367.031.135.016.242.039.32.07ZM43.471 58.14h11.751c2.297 0 4.293.342 5.989 1.026 1.695.684 3 1.695 3.917 3.035.93 1.34 1.394 2.994 1.394 4.963 0 1.709-.266 3.138-.8 4.286a7.674 7.674 0 0 1-2.235 2.85c-.943.74-2.044 1.347-3.302 1.826l-2.358 1.333h-9.864l-.041-5.558h7.3c.916 0 1.675-.164 2.277-.492a3.175 3.175 0 0 0 1.353-1.394c.315-.616.472-1.347.472-2.195 0-.861-.157-1.6-.472-2.214a3.243 3.243 0 0 0-1.394-1.416c-.602-.328-1.347-.492-2.236-.492H50.67V88H43.47V58.14ZM59.816 88l-6.603-13.207 7.629-.041 6.685 12.94V88h-7.71Zm32.107-23.584L84.643 88h-7.731l10.971-29.86h4.901l-.86 6.276ZM97.953 88l-7.301-23.584-.944-6.275h4.963L105.704 88h-7.751Zm-.288-11.136v5.558H82.346v-5.558h15.32Zm25.832-18.723V88h-7.198V58.14h7.198Zm11.607 12.427v5.538h-13.658v-5.538h13.658Zm1.169-12.427v5.557h-14.827v-5.557h14.827Zm18.593 0V88h-7.198V58.14h7.198Zm11.607 12.427v5.538h-13.658v-5.538h13.658Zm1.169-12.427v5.557h-14.827v-5.557h14.827Zm31.123 24.322V88h-15.094v-5.537h15.094Zm-12.53-24.322V88h-7.199V58.14h7.199Zm44.514 24.322V88h-15.914v-5.537h15.914ZM217.398 58.14V88H210.2V58.14h7.198Zm11.3 11.853v5.353h-13.863v-5.353h13.863Zm2.112-11.853v5.557h-15.975v-5.557h15.975ZM201.115 32l1.95 5.98h6.29l-5.09 3.7 1.94 5.98-5.09-3.7-5.08 3.7 1.94-5.98-5.09-3.7h6.29l1.94-5.98ZM225.475 32l1.95 5.98h6.28l-5.08 3.7 1.94 5.98-5.09-3.7-5.08 3.7 1.94-5.98-5.09-3.7h6.29l1.94-5.98ZM48.435 32l1.94 5.98h6.29l-5.09 3.7 1.94 5.98-5.08-3.7-5.09 3.7 1.94-5.98-5.09-3.7h6.29l1.95-5.98ZM72.785 32l1.95 5.98h6.28l-5.08 3.7 1.94 5.98-5.09-3.7-5.08 3.7 1.94-5.98-5.09-3.7h6.29l1.94-5.98Z"
        />
        <path
          stroke="#fff"
          strokeMiterlimit={10}
          strokeWidth={3}
          d="M273.955 22H37.045c-6.627 0-12 5.373-12 12v76.77c0 6.627 5.373 12 12 12h236.91c6.628 0 12-5.373 12-12V34c0-6.627-5.372-12-12-12Z"
        />
        <path
          fill="#fff"
          d="M265.777 103.903h1.951c1.049 0 1.934.094 2.655.282.72.187 1.3.457 1.74.808.439.352.759.777.958 1.275.193.492.29 1.048.29 1.67 0 .492-.062.946-.185 1.362a3.226 3.226 0 0 1-.589 1.125 3.57 3.57 0 0 1-1.072.844c-.439.234-.973.413-1.599.536-.627.123-1.36.184-2.198.184h-1.951c-1.049 0-1.928-.093-2.637-.281-.709-.193-1.277-.466-1.705-.817a2.98 2.98 0 0 1-.931-1.266 4.7 4.7 0 0 1-.282-1.67c0-.498.062-.955.185-1.371.117-.422.308-.797.571-1.125a3.192 3.192 0 0 1 1.037-.835c.428-.234.953-.413 1.574-.536.621-.123 1.35-.185 2.188-.185Zm2.215 1.635h-2.487c-.575 0-1.078.035-1.512.106a4.71 4.71 0 0 0-1.125.29 2.207 2.207 0 0 0-.756.492 1.741 1.741 0 0 0-.422.677 2.42 2.42 0 0 0-.14.852c0 .387.073.73.219 1.028.141.299.366.551.677.756.311.199.718.352 1.222.457.504.106 1.116.158 1.837.158h2.487c.574 0 1.081-.032 1.52-.096.44-.07.821-.173 1.143-.308.316-.135.577-.299.782-.492a1.83 1.83 0 0 0 .457-.668c.094-.258.141-.542.141-.852 0-.399-.076-.748-.229-1.046a1.876 1.876 0 0 0-.712-.747c-.328-.206-.747-.358-1.256-.457-.516-.1-1.131-.15-1.846-.15Zm-2.215-11.76h1.951c1.049 0 1.934.094 2.655.282.72.187 1.3.457 1.74.808.439.352.759.776.958 1.275.193.492.29 1.048.29 1.67 0 .492-.062.946-.185 1.362a3.229 3.229 0 0 1-.589 1.125 3.57 3.57 0 0 1-1.072.844c-.439.234-.973.413-1.599.536-.627.123-1.36.184-2.198.184h-1.951c-1.049 0-1.928-.093-2.637-.281-.709-.193-1.277-.466-1.705-.817a2.979 2.979 0 0 1-.931-1.266 4.698 4.698 0 0 1-.282-1.67c0-.498.062-.955.185-1.371.117-.422.308-.797.571-1.125a3.184 3.184 0 0 1 1.037-.835c.428-.234.953-.413 1.574-.536.621-.123 1.35-.185 2.188-.185Zm2.215 1.635h-2.487c-.575 0-1.078.035-1.512.106-.44.064-.815.16-1.125.29a2.218 2.218 0 0 0-.756.492 1.744 1.744 0 0 0-.422.677c-.094.252-.14.536-.14.852 0 .387.073.73.219 1.028.141.3.366.551.677.756.311.2.718.352 1.222.457.504.106 1.116.158 1.837.158h2.487c.574 0 1.081-.032 1.52-.096a5.06 5.06 0 0 0 1.143-.308c.316-.135.577-.299.782-.492.205-.193.358-.416.457-.668.094-.258.141-.542.141-.853 0-.398-.076-.747-.229-1.045a1.88 1.88 0 0 0-.712-.748c-.328-.205-.747-.357-1.256-.457-.516-.1-1.131-.149-1.846-.149Zm-2.215-11.76h1.951c1.049 0 1.934.094 2.655.282.72.187 1.3.457 1.74.808.439.352.759.776.958 1.275.193.492.29 1.048.29 1.67 0 .492-.062.946-.185 1.362a3.226 3.226 0 0 1-.589 1.125c-.275.328-.632.61-1.072.844-.439.234-.973.413-1.599.536-.627.123-1.36.184-2.198.184h-1.951c-1.049 0-1.928-.094-2.637-.281-.709-.193-1.277-.466-1.705-.817a2.975 2.975 0 0 1-.931-1.266 4.698 4.698 0 0 1-.282-1.67c0-.498.062-.955.185-1.371.117-.422.308-.797.571-1.125a3.184 3.184 0 0 1 1.037-.835c.428-.234.953-.413 1.574-.536.621-.123 1.35-.185 2.188-.185Zm2.215 1.635h-2.487c-.575 0-1.078.035-1.512.106-.44.064-.815.16-1.125.29a2.218 2.218 0 0 0-.756.492 1.744 1.744 0 0 0-.422.677c-.094.252-.14.536-.14.852 0 .387.073.73.219 1.028.141.3.366.551.677.756.311.2.718.352 1.222.457.504.106 1.116.159 1.837.159h2.487c.574 0 1.081-.033 1.52-.097.44-.07.821-.173 1.143-.308.316-.135.577-.299.782-.492.205-.193.358-.416.457-.668.094-.258.141-.542.141-.853 0-.398-.076-.747-.229-1.045a1.88 1.88 0 0 0-.712-.748c-.328-.205-.747-.357-1.256-.457-.516-.1-1.131-.149-1.846-.149Zm-7.664-9.07h12.867v1.626h-10.837l1.195 3.278h-1.467l-1.758-4.65v-.254Zm11.531-13.166h1.336v8.376h-1.169l-4.667-4.193a16.643 16.643 0 0 0-1.459-1.195c-.404-.287-.765-.486-1.081-.598a2.857 2.857 0 0 0-.984-.175c-.422 0-.803.088-1.143.263-.346.17-.621.422-.826.756-.205.334-.308.738-.308 1.213 0 .568.112 1.043.334 1.424.217.375.522.656.914.844.393.187.844.28 1.354.28v1.627c-.721 0-1.38-.158-1.978-.475a3.496 3.496 0 0 1-1.423-1.406c-.358-.621-.537-1.386-.537-2.294 0-.809.144-1.5.431-2.074a3.044 3.044 0 0 1 1.195-1.319c.51-.31 1.108-.465 1.793-.465.375 0 .756.064 1.143.193.381.123.762.296 1.143.519.38.216.755.471 1.125.764.369.287.732.595 1.089.923l3.718 3.428v-6.416Zm-5.862-4.114v-1.16c0-.568-.094-1.037-.281-1.406a1.94 1.94 0 0 0-.783-.835 2.258 2.258 0 0 0-1.125-.281c-.492 0-.905.082-1.239.246-.334.164-.586.41-.756.738-.17.328-.255.744-.255 1.248 0 .457.091.862.273 1.213.176.346.428.618.756.818.328.193.715.29 1.16.29v1.626a3.323 3.323 0 0 1-1.776-.493 3.537 3.537 0 0 1-1.274-1.38c-.316-.597-.475-1.289-.475-2.074 0-.773.138-1.45.413-2.03.27-.58.674-1.031 1.213-1.353.534-.323 1.199-.484 1.996-.484.322 0 .667.076 1.037.229.363.146.703.377 1.019.694.317.31.577.715.782 1.213.2.498.299 1.096.299 1.793v1.389h-.984Zm1.336 0h-.976V57.55c0-.815.097-1.488.29-2.022.194-.533.451-.952.774-1.256.322-.311.676-.528 1.063-.65a3.548 3.548 0 0 1 1.143-.194c.597 0 1.128.102 1.591.307.462.2.855.484 1.177.853.323.363.566.79.73 1.283a5.06 5.06 0 0 1 .246 1.608c0 .557-.079 1.081-.237 1.574a4.087 4.087 0 0 1-.686 1.292 3.215 3.215 0 0 1-1.116.879c-.446.21-.952.316-1.521.316v-1.626c.446 0 .835-.097 1.169-.29.334-.2.595-.48.782-.844.182-.369.273-.803.273-1.3 0-.499-.085-.926-.255-1.284a1.849 1.849 0 0 0-.791-.835c-.352-.199-.794-.298-1.327-.298-.533 0-.97.11-1.31.334-.345.222-.6.538-.764.949-.17.404-.255.882-.255 1.432v1.16Zm1.555-16.4h1.336v9.246h-.958l-8.868-5.73v-1.327l2.567 1.423 5.923 3.788v-7.4Zm-8.49 1.784h12.797v1.626h-12.797v-1.626Zm6.706-5.317-.334 1.3-6.372-.64v-6.566h1.503v5.185l3.481.387a4.772 4.772 0 0 1-.378-.888 4.038 4.038 0 0 1-.176-1.248c0-.592.102-1.122.307-1.59.2-.47.487-.868.862-1.196a3.826 3.826 0 0 1 1.353-.765 5.572 5.572 0 0 1 1.767-.263 5.39 5.39 0 0 1 1.696.255c.516.164.967.413 1.354.747.381.334.677.755.887 1.265.211.504.317 1.099.317 1.785a5.01 5.01 0 0 1-.211 1.467 3.787 3.787 0 0 1-.659 1.23 3.57 3.57 0 0 1-1.108.88c-.445.222-.966.363-1.564.422v-1.547c.48-.07.885-.211 1.213-.422.328-.211.577-.487.747-.826.164-.346.246-.747.246-1.204 0-.387-.067-.73-.202-1.029a2.047 2.047 0 0 0-.58-.756 2.592 2.592 0 0 0-.914-.465 4.042 4.042 0 0 0-1.204-.168c-.405 0-.78.056-1.125.168a2.578 2.578 0 0 0-.906.5 2.183 2.183 0 0 0-.597.8 2.56 2.56 0 0 0-.22 1.09c0 .545.073.958.22 1.24.146.275.345.559.597.852Z"
        />
        <path stroke="#fff" strokeMiterlimit={10} strokeWidth={3} d="M248.615 22v100.78" />
      </g>
      <defs>
        <linearGradient id="b" x1={387.195} x2={-29.305} y1={-48.999} y2={173.001} gradientUnits="userSpaceOnUse">
          <stop stopColor="#007AFF" />
          <stop offset={0.55} stopColor="#00BFFF" />
          <stop offset={1} stopColor="#007AFF" />
        </linearGradient>
        <clipPath id="a">
          <path fill="#fff" d="M.195 0h310.61v144.78H.195z" />
        </clipPath>
      </defs>
    </svg>
  );
};

export const RaffleModal = () => {
  const lottieContainerRef = useRef<HTMLDivElement>(null);
  useEffect(() => {
    if (lottieContainerRef.current) {
      const animation = lottie.loadAnimation({
        container: lottieContainerRef.current,
        renderer: 'svg',
        loop: true,
        autoplay: true,
        animationData,
      });
      return () => {
        animation.destroy();
      };
    }
  }, []);

  const { amount } = useStartParam();
  const [openedModal, setOpenedModal] = useAtom(openedModalAtom);

  return (
    <>
      {openedModal === 'raffle' && (
        <AlertDialog open={true}>
          <AlertDialogContent
            onClickOutside={() => setOpenedModal(undefined)}
            className="w-[calc(100%-32px)] rounded-xl"
          >
            <AlertDialogHeader>
              <VisuallyHidden>
                <AlertDialogTitle>Raffle</AlertDialogTitle>
                <AlertDialogDescription>Raffle</AlertDialogDescription>
              </VisuallyHidden>
            </AlertDialogHeader>
            <div className="flex flex-col items-center justify-center mt-[-16px] relative">
              <RaffleTicket />
              <div className="mt-4 text-center">
                <span className="text-[#111111] text-2xl font-bold">{amount || '50'} USDT</span>
                <br />
                <span className="text-[#111111] text-2xl font-normal"> has been added to your wallet</span>
              </div>
            </div>
            <AlertDialogFooter className="flex gap-2" />
          </AlertDialogContent>
        </AlertDialog>
      )}
      {openedModal === 'raffle' && (
        <div className="fixed top-[25%] z-[100] left-0 right-0">
          <div ref={lottieContainerRef} />
        </div>
      )}
    </>
  );
};
